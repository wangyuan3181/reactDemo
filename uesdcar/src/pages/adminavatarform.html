<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		.default{
			width:140px;
			border:1px solid #eee;
			padding:10px;
			box-sizing:border-box;
			position: relative;
		}
		.default img{
			width:100%;
		}
		.pencil{
			position: absolute;
			right:4px;
			top:4px;
			width:22px;
			height:22px;
			background: url(/images/pencile.svg);
			background-size: cover;
			display: none;
			cursor: pointer;
		}
		.default:hover .pencil{
			display: block;
		}
	</style>
</head>
<body>
	<form action="/up" method="post" enctype="multipart/form-data" id="form">
		<input type="file" id="adminavatar" name="adminavatar" hidden/>
		<input type="submit" hidden/>
	</form>
	<div class="default">
		<span class="pencil" id="pencil"></span>
		
		<img src="/getAvatar" alt="">
	</div>

	<script type="text/javascript" src="/js-lib/jquery-3.2.1.min.js"></script>
	<script type="text/javascript">
		//点击铅笔头子，等价于点击file控件，弹出选择图片的框框
		$("#pencil").click(function(){
			$("#adminavatar").trigger("click");
		});


		//当file变化了，此时模拟表单提交即可
		$("#adminavatar").bind("change" , function(){
			//转原生提交表单
			$("#form")[0].submit();
			//当用户已经选定图片，表单就会提交，瞬间让悬浮曾显示
			window.parent.openXuanfu();
		});
	</script>
</body>
</html>